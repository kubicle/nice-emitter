!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).NiceEmitter=t()}}(function(){return function s(r,h,f){function u(e,t){if(!h[e]){if(!r[e]){var i="function"==typeof require&&require;if(!t&&i)return i(e,!0);if(c)return c(e,!0);var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}var o=h[e]={exports:{}};r[e][0].call(o.exports,function(t){return u(r[e][1][t]||t)},o,o.exports,s,r,h,f)}return h[e].exports}for(var c="function"==typeof require&&require,t=0;t<f.length;t++)u(f[t]);return u}({1:[function(t,e,i){"use strict";function n(){this._listenersPerEventId={},0<s&&(this._maxCountPerListenerKey={})}(e.exports=n).NO_DEBUG=0,n.DEBUG_ERROR=1;var s=n.DEBUG_THROW=2,o=!(n.setDebugLevel=function(t){s=t});function r(t,e){this._count=0,this._methods=null,this._objects=null,0<s&&(this._emitter=t,this._eventId=e,this._counterMap=null)}function h(t,e){if(n.DEBUG_THROW<=s)throw new Error(t+e);console.error(t+e)}n.respectSubscriberOrder=function(t){o=t},n.prototype.declareEvent=function(t){if(void 0!==this._listenersPerEventId[t])return h("Event ID declared twice: ",c(this,t));this._listenersPerEventId[t]=new r(this,t)},n.prototype.emit=function(t,e,i,n){var o=this._listenersPerEventId[t];if(void 0===o)return h("Undeclared event ID for "+u(this)+": ",t),!1;switch(arguments.length){case 1:return o.emit0();case 2:return o.emit1(e);case 3:return o.emit2(e,i);case 4:return o.emit3(e,i,n);default:return o.emitN.apply(o,[].slice.call(arguments,1))}},n.prototype.getQuickEmitter=function(t){var e=this._listenersPerEventId[t];return void 0===e?h("Undeclared event ID for "+u(this)+": ",t):e},n.prototype.listenerCount=function(t){var e=this._listenersPerEventId[t];return void 0===e?h("Undeclared event ID for "+u(this)+": ",t):e._count},n.prototype.addListener=n.prototype.on=function(t,e,i){var n=this._listenersPerEventId[t];if(!n)return h("Invalid event ID: ",c(this,t,i)),this;if(0<s){if(3<=arguments.length&&(!i||"function"==typeof i))return h("Invalid listener parameter to emitter.on '"+t+"': ",typeof i),this;if("function"!=typeof e)return h("Invalid function parameter to emitter.on '"+t+"': ",typeof e),this;n._countListener(i||this,i||null)}return n._addListener(i||this,e),this},n.prototype.removeListener=n.prototype.off=function(t,e){var i=this._listenersPerEventId[t];if(!i)return h("Invalid event ID: ",c(this,t,e));if("function"==typeof e){var n=i._findMethod(e);-1!==n?i._removeListener(n,null):e._hasNiceEmitterOnce&&this._removeOnceListener(i,e)}else{var o=i._findListener(e);if(-1!==o)i._removeListener(o,e);else if(0<s&&!e)return h("Invalid parameter to emitter.off '"+t+"': ",e)}},n.prototype.once=function(t,e,i,n){e._hasNiceEmitterOnce=!0,n=n||5e3;var o=setTimeout(function(){console.error("emitter.once '"+t+"' was not called before "+n+"ms timeout")},n),s=this;function r(){i?s.off(t,i):s.off(t,r),clearTimeout(o),e.apply(this,arguments)}r._timeout=o,r._method=e,i?this.on(t,r,i):this.on(t,r)},n.prototype._removeOnceListener=function(t,e){var i,n=-1,o=t._methods;if(null!==o){if("function"==typeof o)o._method===e&&(i=o);else for(var s=0;s<o.length;s++){var r=o[s];if(r&&r._method===e){i=r,n=s;break}}i&&(t._removeListener(n,null),clearTimeout(i._timeout))}},n.prototype.forgetListener=function(t){for(var e in this._listenersPerEventId)this.off(e,t)},n.prototype.setListenerMaxCount=function(t,e){if(0!==s)return 0<t&&e?void(this._maxCountPerListenerKey[u(e)]=t):h("Invalid parameters to emitter.setListenerMaxCount: ",t+", "+e)},n.prototype.setMaxListeners=function(t){if(0!==s)return!(0<t)||1<arguments.length?h("Invalid parameters to emitter.setMaxListeners: ",t+(void 0!==arguments[1]?", "+arguments[1]:"")):void(this._maxCountPerListenerKey[f]=t)},r.prototype._addListener=function(t,e){if(null===this._methods)this._count=1,this._methods=e,this._objects=t;else if("function"!=typeof this._methods){var i=this._methods.length;if(i!==this._count)if(5<i&&i>2*this._count)this._compactList(this._count+1),i=this._count;else if(o)for(;1<=i&&!this._methods[i-1];)i--;else for(i=0;this._methods[i];i++);this._methods[i]=e,this._objects[i]=t,this._count++}else this._count=2,this._methods=[this._methods,e],this._objects=[this._objects,t]},r.prototype._compactList=function(t){for(var e=new Array(t),i=new Array(t),n=0,o=0;o<this._count;n++)this._methods[n]&&(e[o]=this._methods[n],i[o++]=this._objects[n]);this._methods=e,this._objects=i},r.prototype._findListener=function(t){return"function"==typeof this._methods?this._objects===t?0:-1:null!==this._objects?this._objects.indexOf(t):-1},r.prototype._findMethod=function(t){return"function"==typeof this._methods?this._methods===t?0:-1:null!==this._methods?this._methods.indexOf(t):-1},r.prototype._removeListener=function(t,e){if(this._count--,"function"==typeof this._methods?(this._methods=null,this._objects=null):(this._methods[t]=null,this._objects[t]=null),0<s){var i=u(e);this._counterMap[i]--}},r.prototype._countListener=function(t,e){var i,n=u(e);(this._counterMap?i=(this._counterMap[n]||0)+1:(this._counterMap={0:0},i=1),(this._emitter._maxCountPerListenerKey[n]||1)<i)&&h("Too many listeners: "+c(this._emitter,this._eventId,e)+". ",e?"Use "+u(this._emitter)+".setListenerMaxCount(n, "+n+") with n >= "+i:"Use "+u(this._emitter)+".setMaxListeners(n) with n >= "+i+'. Even better: specify your listeners when calling "on"');2<=(this._counterMap[n]=i)&&1<=this._count&&t===e&&-1!==this._findListener(e)&&h("Listener listens twice: ",c(this._emitter,this._eventId,e))},r.prototype.emit0=function(){if(0===this._count)return!1;if("function"==typeof this._methods)this._methods.call(this._objects);else for(var t=this._methods,e=this._objects,i=this._methods.length,n=0;n<i;n++){var o=t[n];o&&o.call(e[n])}return!0},r.prototype.emit1=function(t){if(0===this._count)return!1;if("function"==typeof this._methods)this._methods.call(this._objects,t);else for(var e=this._methods,i=this._objects,n=this._methods.length,o=0;o<n;o++){var s=e[o];s&&s.call(i[o],t)}return!0},r.prototype.emit2=function(t,e){if(0===this._count)return!1;if("function"==typeof this._methods)this._methods.call(this._objects,t,e);else for(var i=this._methods,n=this._objects,o=this._methods.length,s=0;s<o;s++){var r=i[s];r&&r.call(n[s],t,e)}return!0},r.prototype.emit3=function(t,e,i){if(0===this._count)return!1;if("function"==typeof this._methods)this._methods.call(this._objects,t,e,i);else for(var n=this._methods,o=this._objects,s=this._methods.length,r=0;r<s;r++){var h=n[r];h&&h.call(o[r],t,e,i)}return!0},r.prototype.emitN=function(){if(0===this._count)return!1;if("function"==typeof this._methods)this._methods.apply(this._objects,arguments);else for(var t=this._methods,e=this._objects,i=this._methods.length,n=0;n<i;n++){var o=t[n];o&&o.apply(e[n],arguments)}return!0};var f=0;function u(t){if(!t)return f;if("string"==typeof t)return t;var e=t.constructor;return e.name||e.toString().split(/ |\(/,2)[1]}function c(t,e,i){return i&&"function"!=typeof i?u(t)+".on('"+e+"', fn, "+u(i)+")":u(t)+".on('"+e+"', fn)"}},{}]},{},[1])(1)});