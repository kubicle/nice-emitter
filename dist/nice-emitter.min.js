!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).NiceEmitter=t()}}(function(){return function o(r,h,u){function f(e,t){if(!h[e]){if(!r[e]){var i="function"==typeof require&&require;if(!t&&i)return i(e,!0);if(_)return _(e,!0);var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}var s=h[e]={exports:{}};r[e][0].call(s.exports,function(t){return f(r[e][1][t]||t)},s,s.exports,o,r,h,u)}return h[e].exports}for(var _="function"==typeof require&&require,t=0;t<u.length;t++)f(u[t]);return f}({1:[function(t,e,i){"use strict";function n(){this._listenersPerEventId={},0<o&&(this._maxCountPerListenerKey={})}(e.exports=n).NO_DEBUG=0,n.DEBUG_ERROR=1;var o=n.DEBUG_THROW=2;function s(t,e){this._count=0,this._methods=null,this._objects=null,0<o&&(this._emitter=t,this._eventId=e,this._isEmitting=!1,this._counterMap={})}function r(t,e){if(n.DEBUG_THROW<=o)throw new Error(t+e);console.error(t+e)}n.setDebugLevel=function(t){o=t},n.prototype.declareEvent=function(t){if(void 0!==this._listenersPerEventId[t])return r("Event ID declared twice: ",f(this,t));this._listenersPerEventId[t]=new s(this,t)},n.prototype.emit=function(t,e,i,n){var s=this._listenersPerEventId[t];if(void 0===s)return r("Undeclared event ID for "+u(this)+": ",t),!1;switch(arguments.length){case 1:return s.emit0();case 2:return s.emit1(e);case 3:return s.emit2(e,i);case 4:return s.emit3(e,i,n);default:return s.emitN.apply(s,[].slice.call(arguments,1))}},n.prototype.getQuickEmitter=function(t){var e=this._listenersPerEventId[t];return void 0===e?r("Undeclared event ID for "+u(this)+": ",t):e},n.prototype.listenerCount=function(t){var e=this._listenersPerEventId[t];return void 0===e?r("Undeclared event ID for "+u(this)+": ",t):e._count},n.prototype.addListener=n.prototype.on=function(t,e,i){var n=this._listenersPerEventId[t];if(!n)return r("Invalid event ID: ",f(this,t,i)),this;if(0<o){if("function"!=typeof e||"function"==typeof i)return r("Invalid parameters to emitter.on: '",t+"', "+typeof e+", "+u(i)),this;n._countListener(i||this,i)}return n._addListener(i||this,e),this},n.prototype.removeListener=n.prototype.off=function(t,e){var i=this._listenersPerEventId[t];if(!i)return r("Invalid event ID: ",f(this,t,e));if("function"==typeof e){var n=i._findMethod(e);-1!==n&&i._removeListener(n,null)}else{var s=i._findListener(e);if(-1!==s)i._removeListener(s,e);else if(0<o&&!e)return r("Invalid parameter to emitter.off: '",t+"', "+e)}},n.prototype.forgetListener=function(t){for(var e in this._listenersPerEventId)this.off(e,t)},n.prototype.setListenerMaxCount=function(t,e){if(0!==o)return 0<t&&e?void(this._maxCountPerListenerKey[u(e)]=t):r("Invalid parameters to emitter.setListenerMaxCount: ",t+", "+e)},n.prototype.setMaxListeners=function(t){if(0!==o)return!(0<t)||1<arguments.length?r("Invalid parameters to emitter.setMaxListeners: ",t+(void 0!==arguments[1]?", "+arguments[1]:"")):void(this._maxCountPerListenerKey[h]=t)},s.prototype._addListener=function(t,e){"function"==typeof this._methods?(this._count=2,this._methods=[this._methods,e],this._objects=[this._objects,t]):0===this._count?(this._count=1,this._methods=e,this._objects=t):(this._methods[this._count]=e,this._objects[this._count++]=t)},s.prototype._findListener=function(t){return"function"==typeof this._methods?this._objects===t?0:-1:null!==this._objects?this._objects.indexOf(t):-1},s.prototype._findMethod=function(t){return"function"==typeof this._methods?this._methods===t?0:-1:null!==this._methods?this._methods.indexOf(t):-1},s.prototype._removeListener=function(t,e){if(this._count--,"function"==typeof this._methods)this._methods=null,this._objects=null;else{for(var i=t;i<this._count;i++)this._methods[i]=this._methods[i+1],this._objects[i]=this._objects[i+1];this._methods[i]=null,this._objects[i]=null}if(0<o){var n=u(e);this._counterMap[n]--,this._isEmitting&&r("Removed listener during emit: ",f(this._emitter,this._eventId,e))}},s.prototype._countListener=function(t,e){var i=u(e),n=(this._counterMap[i]||0)+1;(this._emitter._maxCountPerListenerKey[i]||1)<n&&r("Too many listeners: "+f(this._emitter,this._eventId,e)+". ",e?"Use "+u(this._emitter)+".setListenerMaxCount(n, "+i+") with n >= "+n:"Use "+u(this._emitter)+".setMaxListeners(n) with n >= "+n+'. Even better: specify your listeners when calling "on"');2<=(this._counterMap[i]=n)&&1<=this._count&&t===e&&-1!==this._findListener(e)&&r("Listener listens twice: ",f(this._emitter,this._eventId,e))},s.prototype.emit0=function(){if(0===this._count)return!1;if(0<o&&(this._isEmitting=!0),"function"==typeof this._methods)this._methods.call(this._objects);else for(var t=0;t<this._count;t++)this._methods[t].call(this._objects[t]);return 0<o&&(this._isEmitting=!1),!0},s.prototype.emit1=function(t){if(0===this._count)return!1;if(0<o&&(this._isEmitting=!0),"function"==typeof this._methods)this._methods.call(this._objects,t);else for(var e=0;e<this._count;e++)this._methods[e].call(this._objects[e],t);return 0<o&&(this._isEmitting=!1),!0},s.prototype.emit2=function(t,e){if(0===this._count)return!1;if(0<o&&(this._isEmitting=!0),"function"==typeof this._methods)this._methods.call(this._objects,t,e);else for(var i=0;i<this._count;i++)this._methods[i].call(this._objects[i],t,e);return 0<o&&(this._isEmitting=!1),!0},s.prototype.emit3=function(t,e,i){if(0===this._count)return!1;if(0<o&&(this._isEmitting=!0),"function"==typeof this._methods)this._methods.call(this._objects,t,e,i);else for(var n=0;n<this._count;n++)this._methods[n].call(this._objects[n],t,e,i);return 0<o&&(this._isEmitting=!1),!0},s.prototype.emitN=function(){if(0===this._count)return!1;if(0<o&&(this._isEmitting=!0),"function"==typeof this._methods)this._methods.apply(this._objects,arguments);else for(var t=0;t<this._count;t++)this._methods[t].apply(this._objects[t],arguments);return 0<o&&(this._isEmitting=!1),!0};var h="<default>";function u(t){if(!t)return h;if("string"==typeof t)return t;var e=t.constructor;return e.name||e.toString().split(/ |\(/,2)[1]}function f(t,e,i){return void 0===i||"function"==typeof i?u(t)+".on('"+e+"', fn)":u(t)+".on('"+e+"', fn, "+u(i)+")"}},{}]},{},[1])(1)});