!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.NiceEmitter=t()}}(function(){return function t(e,i,n){function s(r,h){if(!i[r]){if(!e[r]){var u="function"==typeof require&&require;if(!h&&u)return u(r,!0);if(o)return o(r,!0);var f=new Error("Cannot find module '"+r+"'");throw f.code="MODULE_NOT_FOUND",f}var _=i[r]={exports:{}};e[r][0].call(_.exports,function(t){var i=e[r][1][t];return s(i||t)},_,_.exports,t,e,i,n)}return i[r].exports}for(var o="function"==typeof require&&require,r=0;r<n.length;r++)s(n[r]);return s}({1:[function(t,e,i){function n(){this._listenersPerEventId={},u>0&&(this._maxCountPerListenerKey={})}function s(t,e){this._count=0,this._methods=null,this._objects=null,u>0&&(this._emitter=t,this._eventId=e,this._isEmitting=!1,this._counterMap={})}function o(t,e){if(u>=n.DEBUG_THROW)throw new Error(t+e);console.error(t+e)}function r(t){if(!t)return f;if("string"==typeof t)return t;var e=t.constructor;return e.name||e.toString().split(/ |\(/,2)[1]}function h(t,e,i){return void 0===i||"function"==typeof i?r(t)+".on('"+e+"', fn)":r(t)+".on('"+e+"', fn, "+r(i)+")"}e.exports=n,n.NO_DEBUG=0,n.DEBUG_ERROR=1,n.DEBUG_THROW=2;var u=n.DEBUG_THROW;n.setDebugLevel=function(t){u=t},n.prototype.declareEvent=function(t){if(void 0!==this._listenersPerEventId[t])return o("Event ID declared twice: ",h(this,t));this._listenersPerEventId[t]=new s(this,t)},n.prototype.emit=function(t,e,i,n){var s=this._listenersPerEventId[t];if(void 0===s)return o("Undeclared event ID for "+r(this)+": ",t),!1;switch(arguments.length){case 1:return s.emit0();case 2:return s.emit1(e);case 3:return s.emit2(e,i);case 4:return s.emit3(e,i,n);default:return s.emitN.apply(s,[].slice.call(arguments,1))}},n.prototype.getQuickEmitter=function(t){var e=this._listenersPerEventId[t];return void 0===e?o("Undeclared event ID for "+r(this)+": ",t):e},n.prototype.listenerCount=function(t){var e=this._listenersPerEventId[t];return void 0===e?o("Undeclared event ID for "+r(this)+": ",t):e._count},n.prototype.on=function(t,e,i){var n=this._listenersPerEventId[t];if(!n)return o("Invalid event ID: ",h(this,t,i)),this;if(u>0){if("function"!=typeof e||"function"==typeof i)return o("Invalid parameters to emitter.on: '",t+"', "+typeof e+", "+r(i)),this;n._countListener(i||this,i)}return n._addListener(i||this,e),this},n.prototype.addListener=n.prototype.on,n.prototype.off=function(t,e){var i=this._listenersPerEventId[t];if(!i)return o("Invalid event ID: ",h(this,t,e));if("function"==typeof e){var n=i._findMethod(e);-1!==n&&i._removeListener(n,null)}else{var s=i._findListener(e);if(-1!==s)i._removeListener(s,e);else if(u>0&&!e)return o("Invalid parameter to emitter.off: '",t+"', "+e)}},n.prototype.removeListener=n.prototype.off,n.prototype.forgetListener=function(t){for(var e in this._listenersPerEventId)this.off(e,t)},n.prototype.setListenerMaxCount=function(t,e){if(0!==u)return t>0&&e?void(this._maxCountPerListenerKey[r(e)]=t):o("Invalid parameters to emitter.setListenerMaxCount: ",t+", "+e)},n.prototype.setMaxListeners=function(t){if(0!==u)return!(t>0)||arguments.length>1?o("Invalid parameters to emitter.setMaxListeners: ",t+(void 0!==arguments[1]?", "+arguments[1]:"")):void(this._maxCountPerListenerKey[f]=t)},s.prototype._addListener=function(t,e){"function"==typeof this._methods?(this._count=2,this._methods=[this._methods,e],this._objects=[this._objects,t]):0===this._count?(this._count=1,this._methods=e,this._objects=t):(this._methods[this._count]=e,this._objects[this._count++]=t)},s.prototype._findListener=function(t){return"function"==typeof this._methods?this._objects===t?0:-1:null!==this._objects?this._objects.indexOf(t):-1},s.prototype._findMethod=function(t){return"function"==typeof this._methods?this._methods===t?0:-1:null!==this._methods?this._methods.indexOf(t):-1},s.prototype._removeListener=function(t,e){if(this._count--,"function"==typeof this._methods)this._methods=null,this._objects=null;else{for(var i=t;i<this._count;i++)this._methods[i]=this._methods[i+1],this._objects[i]=this._objects[i+1];this._methods[i]=null,this._objects[i]=null}if(u>0){var n=r(e);this._counterMap[n]--,this._isEmitting&&o("Removed listener during emit: ",h(this._emitter,this._eventId,e))}},s.prototype._countListener=function(t,e){var i=r(e),n=(this._counterMap[i]||0)+1;n>(this._emitter._maxCountPerListenerKey[i]||1)&&o("Too many listeners: "+h(this._emitter,this._eventId,e)+". ",e?"Use "+r(this._emitter)+".setListenerMaxCount(n, "+i+") with n >= "+n:"Use "+r(this._emitter)+".setMaxListeners(n) with n >= "+n+'. Even better: specify your listeners when calling "on"');this._counterMap[i]=n,n>=2&&this._count>=1&&t===e&&-1!==this._findListener(e)&&o("Listener listens twice: ",h(this._emitter,this._eventId,e))},s.prototype.emit0=function(){if(0===this._count)return!1;if(u>0&&(this._isEmitting=!0),"function"==typeof this._methods)this._methods.call(this._objects);else for(var t=0;t<this._count;t++)this._methods[t].call(this._objects[t]);return u>0&&(this._isEmitting=!1),!0},s.prototype.emit1=function(t){if(0===this._count)return!1;if(u>0&&(this._isEmitting=!0),"function"==typeof this._methods)this._methods.call(this._objects,t);else for(var e=0;e<this._count;e++)this._methods[e].call(this._objects[e],t);return u>0&&(this._isEmitting=!1),!0},s.prototype.emit2=function(t,e){if(0===this._count)return!1;if(u>0&&(this._isEmitting=!0),"function"==typeof this._methods)this._methods.call(this._objects,t,e);else for(var i=0;i<this._count;i++)this._methods[i].call(this._objects[i],t,e);return u>0&&(this._isEmitting=!1),!0},s.prototype.emit3=function(t,e,i){if(0===this._count)return!1;if(u>0&&(this._isEmitting=!0),"function"==typeof this._methods)this._methods.call(this._objects,t,e,i);else for(var n=0;n<this._count;n++)this._methods[n].call(this._objects[n],t,e,i);return u>0&&(this._isEmitting=!1),!0},s.prototype.emitN=function(){if(0===this._count)return!1;if(u>0&&(this._isEmitting=!0),"function"==typeof this._methods)this._methods.apply(this._objects,arguments);else for(var t=0;t<this._count;t++)this._methods[t].apply(this._objects[t],arguments);return u>0&&(this._isEmitting=!1),!0};var f="<default>"},{}]},{},[1])(1)});